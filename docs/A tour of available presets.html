<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>A tour of available presets &mdash; regelum 0.2.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
      <link rel="stylesheet" href="_static/fonts.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
      <link rel="stylesheet" href="_static/fonts.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> regelum
            <img src="_static/logo_with_background.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#what-is-rcognita">What is <code class="docutils literal notranslate"><span class="pre">rcognita</span></code>?</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#rcognita-s-config-pipeline"><code class="docutils literal notranslate"><span class="pre">rcognita</span></code>’s config pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#presets">Presets</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#related-literature">Related literature</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#closing-remarks">Closing remarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#for-developers">For developers</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Configs and basic <code class="docutils literal notranslate"><span class="pre">rcognita</span></code> applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html#callbacks-and-logging">Callbacks and Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html#what-if-i-still-don-t-know-what-i-m-doing">What if I still don’t know what I’m doing?</a></li>
</ul>
<p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.adaptation_block.html"><code class="docutils literal notranslate"><span class="pre">regelum.adaptation_block</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.callback.html"><code class="docutils literal notranslate"><span class="pre">regelum.callback</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.controller.html"><code class="docutils literal notranslate"><span class="pre">regelum.controller</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.critic.html"><code class="docutils literal notranslate"><span class="pre">regelum.critic</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.data_buffers.html"><code class="docutils literal notranslate"><span class="pre">regelum.data_buffers</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.data_buffers.batch_sampler.html"><code class="docutils literal notranslate"><span class="pre">regelum.data_buffers.batch_sampler</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.data_buffers.data_buffer.html"><code class="docutils literal notranslate"><span class="pre">regelum.data_buffers.data_buffer</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.data_buffers.fifo_list.html"><code class="docutils literal notranslate"><span class="pre">regelum.data_buffers.fifo_list</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.data_buffers.types.html"><code class="docutils literal notranslate"><span class="pre">regelum.data_buffers.types</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.model.html"><code class="docutils literal notranslate"><span class="pre">regelum.model</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.objective.html"><code class="docutils literal notranslate"><span class="pre">regelum.objective</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.observer.html"><code class="docutils literal notranslate"><span class="pre">regelum.observer</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.optimizable.html"><code class="docutils literal notranslate"><span class="pre">regelum.optimizable</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.optimizable.core.html"><code class="docutils literal notranslate"><span class="pre">regelum.optimizable.core</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.optimizable.core.configs.html"><code class="docutils literal notranslate"><span class="pre">regelum.optimizable.core.configs</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.optimizable.core.entities.html"><code class="docutils literal notranslate"><span class="pre">regelum.optimizable.core.entities</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.optimizable.core.hooks.html"><code class="docutils literal notranslate"><span class="pre">regelum.optimizable.core.hooks</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.optimizable.optimizers.html"><code class="docutils literal notranslate"><span class="pre">regelum.optimizable.optimizers</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.policy.html"><code class="docutils literal notranslate"><span class="pre">regelum.policy</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.predictor.html"><code class="docutils literal notranslate"><span class="pre">regelum.predictor</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.scenario.html"><code class="docutils literal notranslate"><span class="pre">regelum.scenario</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.simulator.html"><code class="docutils literal notranslate"><span class="pre">regelum.simulator</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/regelum.system.html"><code class="docutils literal notranslate"><span class="pre">regelum.system</span></code></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">regelum</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">A tour of available presets</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="a-tour-of-available-presets">
<h1>A tour of available presets<a class="headerlink" href="#a-tour-of-available-presets" title="Permalink to this headline"></a></h1>
<dl class="simple">
<dt>This document provides run commands for several algorithms</dt><dd><ul class="simple">
<li><p>Model Predictive Control</p></li>
<li><p>CALF (with safe stabilizing policies)</p></li>
<li><p>RL algorithms</p></li>
</ul>
</dd>
</dl>
<p>on different environments also known as systems. It can be done via running <code class="docutils literal notranslate"><span class="pre">preset_endpoint.py</span></code> with different flags.
<code class="docutils literal notranslate"><span class="pre">preset_endpoint.py</span></code> works as follows. It parses provided flags and configs that are located in general folder with further instantiation
the scenario class (and corresponding system animator if necessary) and runs the learning procedure. For detailed explanation of how to work
with configuration files in rcognita go to this page. The list of available systems can be found here. And their corresponding instantiation
configurations are located in this folder. Note that we used simplified notation in the provided configs (link)</p>
<dl class="simple">
<dt>So, the list of available systems that are provided in configuration files is the following:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">2tank</span></code> that instatiates rcognita.systems.System2Tank</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3wrobot_ni</span></code> that instatiates rcognita.systems.Sys3WRobotNI</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3wrobot</span></code> that instatiates rcognita.systems.Sys3WRobot</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cartpole</span></code> that instatiates rcognita.systems.SysCartpole</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inv_pendulum</span></code> that instatiates rcognita.systems.SysInvertedPedulum</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kin_point</span></code> that instatiates rcognita.systems.SysKinematicPoint</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lunar_lander</span></code> that instatiates rcognita.systems.SysLunarLande</p></li>
</ul>
</dd>
</dl>
<section id="environment-variables-setup">
<h2>Environment variables setup<a class="headerlink" href="#environment-variables-setup" title="Permalink to this headline"></a></h2>
<p>In the root of the repo run the following commands</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export HYDRA_FULL_ERROR=1
export PYTHONPATH=$(pwd)
</pre></div>
</div>
</section>
<section id="playground">
<h2>Playground<a class="headerlink" href="#playground" title="Permalink to this headline"></a></h2>
<section id="calf-and-mpc">
<h3>CALF and MPC<a class="headerlink" href="#calf-and-mpc" title="Permalink to this headline"></a></h3>
<p>For quick start go to playground via <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">playground</span></code> and run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">preset_endpoint</span><span class="o">.</span><span class="n">py</span> <span class="n">system</span><span class="o">=</span><span class="mi">3</span><span class="n">wrobot_ni</span> <span class="n">controller</span><span class="o">=</span><span class="n">mpc</span> <span class="n">cenario</span><span class="o">.</span><span class="n">howanim</span><span class="o">=</span><span class="n">live</span> <span class="n">animator</span><span class="o">.</span><span class="n">fps</span><span class="o">=</span><span class="mi">100</span> <span class="n">scenario</span><span class="o">.</span><span class="n">N_episodes</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>and see how the Model Predictive Control is stabilizing 3wrobot_ni system in live animation. If you want to turn off the animation just delete the flags
<code class="docutils literal notranslate"><span class="pre">scenario.howanim=live</span> <span class="pre">animator.fps=100</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">preset_endpoint</span><span class="o">.</span><span class="n">py</span> <span class="n">controller</span><span class="o">=</span><span class="n">mpc</span> <span class="n">system</span><span class="o">=</span><span class="mi">3</span><span class="n">wrobot</span> <span class="n">scenario</span><span class="o">.</span><span class="n">N_episodes</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>This command run MPC algorithm for stabilizing of 3wrobot_ni system. If you want to stabilize another system, for instance, inverted pendulum, you
should override <code class="docutils literal notranslate"><span class="pre">system=</span></code> flag like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">preset_endpoint</span><span class="o">.</span><span class="n">py</span> <span class="n">controller</span><span class="o">=</span><span class="n">mpc</span> <span class="n">system</span><span class="o">=</span><span class="n">inv_pendulum</span> <span class="n">scenario</span><span class="o">.</span><span class="n">N_episodes</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>The list of available systems is the following: <code class="docutils literal notranslate"><span class="pre">2tank</span></code>, <code class="docutils literal notranslate"><span class="pre">3wrobot_ni</span></code>, <code class="docutils literal notranslate"><span class="pre">3wrobot</span></code>, <code class="docutils literal notranslate"><span class="pre">cartpole</span></code>. <code class="docutils literal notranslate"><span class="pre">inv_pendulum</span></code>, <code class="docutils literal notranslate"><span class="pre">kin_point</span></code>, <code class="docutils literal notranslate"><span class="pre">lunar_lander</span></code>.</p>
<p>To run CALF alogorithm just write</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">preset_endpoint</span><span class="o">.</span><span class="n">py</span> <span class="n">controller</span><span class="o">=</span><span class="n">calf_ex_post</span> <span class="n">system</span><span class="o">=</span><span class="mi">3</span><span class="n">wrobot</span> <span class="n">scenario</span><span class="o">.</span><span class="n">N_episodes</span><span class="o">=</span><span class="mi">10</span>
</pre></div>
</div>
<p>This command runs CALF algorithm for stabilizing of 3wrobot system. Again, if you want to stabilize another system just override <code class="docutils literal notranslate"><span class="pre">system=</span></code> flag. To run
the CALF stabilizing policy one should use flag <code class="docutils literal notranslate"><span class="pre">+controller.safe_only=True</span></code> with <code class="docutils literal notranslate"><span class="pre">scenario.N_episodes=1</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">preset_endpoint</span><span class="o">.</span><span class="n">py</span> <span class="n">controller</span><span class="o">=</span><span class="n">calf_ex_post</span> <span class="n">system</span><span class="o">=</span><span class="mi">3</span><span class="n">wrobot</span> <span class="n">scenario</span><span class="o">.</span><span class="n">N_episodes</span><span class="o">=</span><span class="mi">1</span> <span class="o">+</span><span class="n">controller</span><span class="o">.</span><span class="n">safe_only</span><span class="o">=</span><span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="rl-algorithms">
<h3>RL algorithms<a class="headerlink" href="#rl-algorithms" title="Permalink to this headline"></a></h3>
<p>DQN on 3wrobot_ni:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>python preset_endpoint.py  \                                                                                                                                                                                         ─╯
    system=3wrobot_ni \
    controller=dqn \
    initial_conditions=ic_3wrobot_ni_stochastic \
    scenario.N_episodes=50 \
    controller.actor.discount_factor=0.99 \
    controller.critic.optimizer.opt_options.lr=0.001 \
    controller.critic.optimizer.iterations=1 \
    controller.critic.batch_size=30 \
    controller.critic.td_n=30 \
    +seed=1
</pre></div>
</div>
<p>SDPG on inverted pendulum</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">preset_endpoint</span><span class="o">.</span><span class="n">py</span> \
    <span class="n">system</span><span class="o">=</span><span class="n">inv_pendulum</span> \
    <span class="n">controller</span><span class="o">=</span><span class="n">acpg</span> \
    <span class="o">+</span><span class="n">seed</span><span class="o">=</span><span class="mi">8</span> \
    <span class="n">scenario</span><span class="o">=</span><span class="n">episodic_reinforce</span> \
    <span class="n">scenario</span><span class="o">.</span><span class="n">N_episodes</span><span class="o">=</span><span class="mi">5</span>
</pre></div>
</div>
<p>SDPG on inverted pendulum</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">preset_endpoint</span><span class="o">.</span><span class="n">py</span> \
    <span class="n">system</span><span class="o">=</span><span class="n">inv_pendulum</span> \
    <span class="n">controller</span><span class="o">=</span><span class="n">acpg</span> \
    <span class="o">+</span><span class="n">seed</span><span class="o">=</span><span class="mi">8</span> \
    <span class="n">scenario</span><span class="o">=</span><span class="n">episodic_reinforce</span> \
    <span class="n">scenario</span><span class="o">.</span><span class="n">N_episodes</span><span class="o">=</span><span class="mi">5</span>
</pre></div>
</div>
</section>
</section>
<section id="useful-flags">
<h2>Useful Flags<a class="headerlink" href="#useful-flags" title="Permalink to this headline"></a></h2>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scenario.howanim=live</span></code> - for live animation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scenario.howanim=playback</span></code> - for animation playback without saving</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scenario.howanim=html</span></code> - for saving animation in html</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scenario.howanim=mp4</span></code> - for saving animation in mp4</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scenario.howanim=None</span></code> - do not activate animation at all</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scenario.N_episodes=2</span></code> - run scenario with 2 episodes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">simulator.time_final=10</span></code> - set time_final</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">animator.fps=20</span></code> - use this parameter for changing fps for animation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">system_specific.sampling_time=0.03</span></code> - set the sampling time</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">controller=dqn</span></code> - possible variants are <code class="docutils literal notranslate"><span class="pre">[dqn,mpc,calf_ex_post,calf_predictive,rql,sarsa,ddqn,sql,ddqn,acpg,ddpg]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--cooldown-factor=0.1</span></code> - decrease all cooldowns 10-fold</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">system=2tank</span></code> - possible variants are <code class="docutils literal notranslate"><span class="pre">[2tank,3wrobot,3wrobot_ni,cartpole,inv_pendulum,kin_point,lunar_lander]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">system_specific.calf_data_buffer_size=200</span></code>— change calf buffer to 200</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">system=inv_pendulum</span> <span class="pre">controller=mpc</span> <span class="pre">controller.actor.predictor.prediction_horizon=3</span></code> — run mpc with prediction horizon 3</p></li>
</ul>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, AIDA Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>